# input-address-hints
test task

Данный код является реализацией тестового задания. 
Задача:
1) вывести поле ввода адреса
2) после ввода 3го символа и далее должны подгружаться подсказки адресов. для этого должно идти обращение на backend, 
который в свою очередь делает запрос на google или yandex гео сервис. 
3) после клика по подсказке адрес должен подставляться в поле ввода
Условия:
1) без Jquery
2) vue/angluar/react + webpack
3) backend любой
4) запрос и ответ сервиса логировать в базе данных(любой)

Решение:
1) решил сделать компонент для битрикс
2) используется встроенный в битрикс vue и механизма аякс запросов
3) для оптимизации запросы кешируются через Php cache через api Битрикса, а также на стороне клиента запросы и ответы сохраняются в js объект.
4) webpack небыл испльзован т.к. для битикса это не типично, когда речь идет о компонентах.
(код js написан без использования es6, т.к. нет перевода кода через babel в es5. но подключен es5 shim, 
т.к. используются некоторые "новые" функции для работы со строками и массивами)

Если требуется масштабировать данное решние для 100 000 запросов в секунду
1) нужно отказаться компонента битрикса
2) можно использовать nodejs
3) поднимается rabbitmq сервер
4) создается сервер на nodejs он слушает запросы с клиента (строка запроса) и отправляет их в rabbitmq 
5) создается микросервис на Nodejs который слушает сообщения от rabbitmq. когда получает запрос - то делает отправку в гео сервис яндекса.
результаты кешируются. после этого подсказки для введенного адреса послаются микросервисом в rabbitmq
6) сервер nodejs слушает ответы и по мере их поступления отдает подсказки клиентам

Идея в том, что все 100 тыс запросов в любом случае будут приняты и отправлены в очередь.
И будут выполняться по мере возможности микросервисом, и постепенно отдаваться пользователям. 
Мкиросервис можно разнести по разным серверам и настроить балансировщик, который будет работать  с менее загруженным сервисом в данный момент времени. 

При этом можно еще попробовать заранее закешировать возможные варианты поисковых строк самых основных. 
Для кеширования лучше ипользовать кеш на оперативной памяти (Memcached)

